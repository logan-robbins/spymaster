lake_root: lake

datasets:
  # Shared
  bronze.shared.instrument_definitions:
    path: bronze/source=databento/shared/symbol={symbol}/table=instrument_definitions
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/shared/instrument_definitions.avsc

  # Bronze - Futures
  bronze.future.market_by_price_10:
    path: bronze/source=databento/product_type=future/symbol={symbol}/table=market_by_price_10
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future/market_by_price_10.avsc

  # Bronze - Future Options
  bronze.future_option.trades:
    path: bronze/source=databento/product_type=future_option/symbol={symbol}/table=trades
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option/trades.avsc

  bronze.future_option.nbbo:
    path: bronze/source=databento/product_type=future_option/symbol={symbol}/table=nbbo
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option/nbbo.avsc

  bronze.future_option.statistics:
    path: bronze/source=databento/product_type=future_option_mbo/symbol={symbol}/table=statistics
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option/statistics.avsc

  bronze_cache.future_option.statistics_0dte:
    path: bronze_cache/product_type=future_option_mbo/symbol={symbol}/table=statistics_0dte
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option/statistics.avsc

  # Bronze - Future MBO
  bronze.future_mbo.mbo:
    path: bronze/source=databento/product_type=future_mbo/symbol={symbol}/table=mbo
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_mbo/mbo.avsc

  # Bronze - Future Option MBO
  bronze.future_option_mbo.mbo:
    path: bronze/source=databento/product_type=future_option_mbo/symbol={symbol}/table=mbo
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option_mbo/mbo.avsc

  bronze_cache.future_option_mbo.mbo_0dte:
    path: bronze_cache/product_type=future_option_mbo/symbol={symbol}/table=mbo_0dte
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/future_option_mbo/mbo.avsc

  # Bronze - Equity MBO
  bronze.equity_mbo.mbo:
    path: bronze/source=databento/product_type=equity_mbo/symbol={symbol}/table=mbo
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/equity_mbo/mbo.avsc

  # Bronze - Equity Option MBO (CMBP-1)
  bronze.equity_option_mbo.cmbp_1:
    path: bronze/source=databento/product_type=equity_option_cmbp_1/symbol={symbol}/table=cmbp_1
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/equity_option_mbo/cmbp_1.avsc

  bronze_cache.equity_option_mbo.cmbp_1_0dte:
    path: bronze_cache/product_type=equity_option_cmbp_1/symbol={symbol}/table=cmbp_1_0dte
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/bronze/equity_option_mbo/cmbp_1.avsc

  # Silver - Future Option MBO
  silver.future_option_mbo.book_snapshot_1s:
    path: silver/product_type=future_option_mbo/symbol={symbol}/table=book_snapshot_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option_mbo/book_snapshot_1s.avsc

  silver.future_option_mbo.depth_and_flow_1s:
    path: silver/product_type=future_option_mbo/symbol={symbol}/table=depth_and_flow_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option_mbo/depth_and_flow_1s.avsc

  # Silver - Futures
  silver.future.market_by_price_10:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10.avsc

  silver.future.market_by_price_10_session_levels:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_session_levels
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_session_levels.avsc

  silver.future.market_by_price_10_first4h:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_first4h
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_session_levels.avsc

  silver.future.market_by_price_10_bar5s:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_bar5s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_bar5s.avsc

  # Silver - Future MBO
  silver.future_mbo.book_snapshot_1s:
    path: silver/product_type=future_mbo/symbol={symbol}/table=book_snapshot_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_mbo/book_snapshot_1s.avsc

  silver.future_mbo.depth_and_flow_1s:
    path: silver/product_type=future_mbo/symbol={symbol}/table=depth_and_flow_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_mbo/depth_and_flow_1s.avsc

  # Silver - Equity MBO
  silver.equity_mbo.book_snapshot_1s:
    path: silver/product_type=equity_mbo/symbol={symbol}/table=book_snapshot_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/equity_mbo/book_snapshot_1s.avsc

  silver.equity_mbo.depth_and_flow_1s:
    path: silver/product_type=equity_mbo/symbol={symbol}/table=depth_and_flow_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/equity_mbo/depth_and_flow_1s.avsc

  # Silver - Futures - 2-minute candle level approach (one per level type)
  silver.future.market_by_price_10_pm_high_approach2m:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_pm_high_approach2m
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_level_approach2m.avsc

  silver.future.market_by_price_10_pm_low_approach2m:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_pm_low_approach2m
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_level_approach2m.avsc

  silver.future.market_by_price_10_or_high_approach2m:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_or_high_approach2m
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_level_approach2m.avsc

  silver.future.market_by_price_10_or_low_approach2m:
    path: silver/product_type=future/symbol={symbol}/table=market_by_price_10_or_low_approach2m
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future/market_by_price_10_level_approach2m.avsc

  # Silver - Future Options
  silver.future_option.trades_clean:
    path: silver/product_type=future_option/symbol={symbol}/table=trades_clean
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option/trades_clean.avsc

  silver.future_option.nbbo_clean:
    path: silver/product_type=future_option/symbol={symbol}/table=nbbo_clean
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option/nbbo_clean.avsc

  silver.future_option.statistics_clean:
    path: silver/product_type=future_option_mbo/symbol={symbol}/table=statistics_clean
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option/statistics_clean.avsc
  
  silver.future_option.statistics_clean:
    path: silver/product_type=future_option/symbol={symbol}/table=statistics_clean
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/future_option/statistics_clean.avsc

  # Silver - Equity Option MBO
  silver.equity_option_mbo.book_snapshot_1s:
    path: silver/product_type=equity_option_mbo/symbol={symbol}/table=book_snapshot_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/equity_option_mbo/book_snapshot_1s.avsc

  silver.equity_option_mbo.depth_and_flow_1s:
    path: silver/product_type=equity_option_mbo/symbol={symbol}/table=depth_and_flow_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/silver/equity_option_mbo/depth_and_flow_1s.avsc

  # Gold - Futures
  gold.future.setup_vectors:
    path: gold/product_type=future/symbol={symbol}/table=setup_vectors
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future/setup_vectors.avsc

  # Gold - Future MBO
  gold.future_mbo.physics_surface_1s:
    path: gold/product_type=future_mbo/symbol={symbol}/table=physics_surface_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future_mbo/physics_surface_1s.avsc

  # Gold - Equity MBO
  gold.equity_mbo.physics_surface_1s:
    path: gold/product_type=equity_mbo/symbol={symbol}/table=physics_surface_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/equity_mbo/physics_surface_1s.avsc

  # Gold - Future Option MBO
  gold.future_option_mbo.physics_surface_1s:
    path: gold/product_type=future_option_mbo/symbol={symbol}/table=physics_surface_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future_option_mbo/physics_surface_1s.avsc

  # Gold - Equity Option MBO
  gold.equity_option_mbo.physics_surface_1s:
    path: gold/product_type=equity_option_mbo/symbol={symbol}/table=physics_surface_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/equity_option_mbo/physics_surface_1s.avsc

  # Gold - Future Options
  gold.future_option.trades_first3h:
    path: gold/product_type=future_option/symbol={symbol}/table=trades_first3h
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future_option/trades_first3h.avsc

  gold.future_option.nbbo_first3h:
    path: gold/product_type=future_option/symbol={symbol}/table=nbbo_first3h
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future_option/nbbo_first3h.avsc

  gold.future_option.statistics_first3h:
    path: gold/product_type=future_option/symbol={symbol}/table=statistics_first3h
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/gold/future_option/statistics_first3h.avsc

  # Stream
  stream.forecast_1s:
    path: stream/product_type=forecast/symbol={symbol}/table=forecast_1s
    format: parquet
    partition_keys: [symbol, dt]
    contract: src/data_eng/contracts/stream/forecast_1s.avsc
