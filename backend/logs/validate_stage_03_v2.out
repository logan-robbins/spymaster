2025-12-28 23:13:03,965 - INFO - Starting Stage 3 validation for 2025-12-16
2025-12-28 23:13:03,965 - INFO - Log file: /Users/loganrobbins/research/qmachina/spymaster/backend/logs/validate_stage_03_2025-12-16.log
2025-12-28 23:13:03,965 - INFO - Running through InitMarketState stage...
2025-12-28 23:13:03,965 - [2.0.0] Starting pipeline: es_pipeline
2025-12-28 23:13:03,965 - [2.0.0] Date: 2025-12-16
2025-12-28 23:13:03,965 - [2.0.0] Stages: 16
2025-12-28 23:13:03,965 - [2.0.0] Checkpointing enabled: data/checkpoints
2025-12-28 23:13:03,965 - [2.0.0] Resuming from stage 3
2025-12-28 23:13:03,965 - Loading checkpoint from stage 2: build_ohlcv_2min
2025-12-28 23:13:04,828 - [2.0.0] Will stop after stage 3
2025-12-28 23:13:04,828 - [2.0.0] (4/16) Running: init_market_state
2025-12-28 23:13:06,115 - [2.0.0]   Completed in 1.29s
2025-12-28 23:13:09,147 - [2.0.0] No 'signals' in context, returning empty DataFrame
2025-12-28 23:13:09,292 - Loading checkpoint from stage 3: init_market_state
2025-12-28 23:13:10,660 - ================================================================================
2025-12-28 23:13:10,661 - Validating Stage 3: InitMarketState for 2025-12-16
2025-12-28 23:13:10,661 - ================================================================================
2025-12-28 23:13:10,661 - 
1. Checking required outputs...
2025-12-28 23:13:10,661 -   ✅ Previous outputs preserved
2025-12-28 23:13:10,661 -   ✅ New outputs present: market_state, spot_price
2025-12-28 23:13:10,661 - 
2. Validating MarketState...
2025-12-28 23:13:10,661 -   ✅ MarketState instance created
2025-12-28 23:13:10,661 -   ES trades in buffer: 612,748
2025-12-28 23:13:10,661 -   ✅ Trades loaded
2025-12-28 23:13:10,661 -   MBP-10 snapshots in buffer: 95,409
2025-12-28 23:13:10,661 -   ✅ MBP-10 loaded
2025-12-28 23:13:10,661 -   Option flows in buffer: 102
2025-12-28 23:13:10,661 -   ✅ Option flows loaded
2025-12-28 23:13:10,661 -   Buffer window: 480 seconds
2025-12-28 23:13:10,661 -   ✅ Buffer window sufficient
2025-12-28 23:13:10,661 - 
3. Validating Greeks (delta/gamma)...
2025-12-28 23:13:10,661 -   ✅ Delta and gamma columns present
2025-12-28 23:13:10,661 -   Delta range: -0.9979 to 0.9996
2025-12-28 23:13:10,661 -   ✅ Delta range valid
2025-12-28 23:13:10,662 -   Call delta mean: 0.0424 (should be positive)
2025-12-28 23:13:10,662 -   Put delta mean: -0.0589 (should be negative)
2025-12-28 23:13:10,662 -   Gamma range: 0.000000 to 0.013509
2025-12-28 23:13:10,662 -   Gamma mean: 0.000471
2025-12-28 23:13:10,662 -   ✅ All gamma values positive
2025-12-28 23:13:10,662 -   ✅ No NaN Greeks
2025-12-28 23:13:10,662 - 
4. Validating Spot Price...
2025-12-28 23:13:10,662 -   Spot price: 6845.25
2025-12-28 23:13:10,662 -   ✅ Spot price reasonable
2025-12-28 23:13:10,662 - 
================================================================================
2025-12-28 23:13:10,662 - ✅ Stage 3 Validation: PASSED
2025-12-28 23:13:10,662 - ================================================================================

2025-12-28 23:13:10,662 - Results saved to: /Users/loganrobbins/research/qmachina/spymaster/backend/logs/validate_stage_03_2025-12-16_results.json
